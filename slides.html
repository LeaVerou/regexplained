<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>/Reg(exp){2}lained/</title>

<link href="../csss/slideshow.css" rel="stylesheet" />
<link href="../csss/reusable.css" rel="stylesheet" />
<link href="../talks/shared/intro-outro.css" rel="stylesheet" />
<link href="css/global.css" rel="stylesheet" />
<link href="css/theme.css" rel="stylesheet" />
<link href="css/talk.css" rel="stylesheet" />
<link href="css/regex-test.css" rel="stylesheet" />

</head>
<body>

<header id="intro" class="slide dont-resize">
	<hgroup>
		<h1>/Reg(exp){2}lained/</h1>
		<h2>Demystifying regular expressions</h2>
	</hgroup>
	<p class="attribution">By Lea Verou (@LeaVerou)</p>
</header>



<section id="introduction">
	<section id="hi" class="inverse slide dont-resize darker hi">
		<figure class="delayed">
			<img src="../talks/shared/img/me-pirate.png" alt="Picture of me" title="Pirate illustration by Lorenzo Grandi http://www.lorenzograndi.it/" />
			<figcaption style="font-size: 240%">–ü—Ä–∏–≤–µ—Ç, —è –õ–∏–∞</figcaption>
		</figure>
	</section>

	<section class="inverse slide dont-resize darker hi" id="lesbian" data-steps="2">
		<div>
			<p class="funfact">#funfact</p>
			<p>I grew up in Lesbos, Greece</p>
			<p>‚Ä¶which technically makes me <strong>geographically Lesbian</strong></p>
		</div>
	</section>

	<section class="top-heavy slide dont-resize" id="projects">
		<ul class="plain">
			<li><a href="http://mavo.io/" style="background-image: url(../talks/shared/img/project-mavo.png)">Mavo</a></li>
			<li><a href="http://prismjs.com" style="background-image: url(../talks/shared/img/project-prism.png)">PrismJS</a></li>
			<li><a href="http://leaverou.github.io/prefixfree" style="background-image: url(../talks/shared/img/project-prefixfree.png)">-prefix-free</a></li>
			<li><a href="http://blissfuljs.com" style="background-image: url(../talks/shared/img/project-bliss.png)">Bliss</a></li>
			<li><a href="http://css3test.com" style="background-image: url(../talks/shared/img/project-css3test.png)">css3test.com</a></li>
			<li><a href="http://leaverou.github.io/awesomplete/" style="background-image: url(../talks/shared/img/project-awesomplete.png)">Awesomplete</a></li>
			<li><a href="http://cubic-bezier.com/" style="background-image: url(../talks/shared/img/project-cubicbezier.png)">cubic-bezier.com</a></li>
			<li><a href="http://dabblet.com" style="background-image: url(../talks/shared/img/project-dabblet.png)">dabblet.com</a></li>
			<li><a href="http://leaverou.github.io/contrast-ratio/" style="background-image: url(../talks/shared/img/project-contrastratio.png)">Contrast Ratio</a></li>
		</ul>
	</section>

	<section class="top-heavy image slide" id="csswg" data-credits="Daniel Glazman" data-steps="1">
		<h1 class="caption">
			<!-- <img src="../talks/shared/img/w3c.svg" alt="W3C" class="inline"> -->
			W3C CSS Working Group Invited Expert
		</h1>
		<svg viewBox="0 0 100 100" class="annotation">
			<ellipse />
		</svg>
	</section>

	<section class="inverse slide dont-resize darker hi" id="book">
		<a href="http://shop.oreilly.com/product/0636920031123.do">
			<img src="../talks/shared/img/book.png" alt="CSS Secrets by O‚ÄôReilly" style="display:block" />
			‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ on Amazon
		</a>
	</section>

	<article class="image slide" style="background: url(img/russian-csssecrets.jpg) center/contain no-repeat white">

	</article>

	<section class="top-heavy image slide" id="mit">
		<h1><strong>2014&thinsp;‚Äì</strong> Haystack Group, MIT CSAIL</h1>
	</section>
</section>

<section class="slide dont-resize" id="names">
	<div class="speech-bubble">
		<ul>
			<li>‚ÄúRegular expression‚Äù</li>
			<li>‚ÄúRegexp‚Äù</li>
			<li>‚ÄúRegex‚Äù</li>
			<li class="delayed invalid">‚ÄúASCII puke‚Äù</li>
		</ul>
	</div>
	<div class="delayed speech-bubble">
		<p><pre>/^Reg(exp?|ular expression)$/i</pre></p>
	</div>
</section>

<section class="image slide" style="background-image: url(img/strings.jpg)" data-source="http://www.flickr.com/photos/gargi/3010324017/">
	<dl class="caption">
		<dt>Regular expressions:</dt>
		<dd>A way to describe a set of strings</dd>
	</dl>
</section>

<section class="slide syntax-breakdown">
	<h1><code style="font-size: 5.8vw;">/
		<span title="Beginning of string">^</span>
		Reg(ex
		<span title="Maybe one p" data-index="1">p?</span>
		<span title="or" data-index="1">|</span>
		ular expression)
		<span title="End&nbsp;of string">$</span>
		/
		<span title="Case insensitive" data-index="1">i</span>
	</code></h1>
</section>

<section class="narrow slide">
	<pre><code class="language-javascript">"p√¢t√©".normalize("NFD").replace(/[\u0300-\u036f]/g, "") // "pate"</code></pre>
	<pre><code class="language-markup">&lt;input name="zip" pattern="\d{5}" /> </code></pre>
	<pre><code class="language-javascript">'lea@verou.me'.match(/(\w+)@/)[1] // "lea"</code></pre>
	<pre><code class="language-javascript">code.replace(/ {4}/g, '\t'); // fix broken indentation</code></pre>
	<p>Also: text editors, IDEs, command line tools (grep, etc), databases, and more</p>
</section>

<section>
	<section class="slide syntax-breakdown">
		<h1><code style="font-size: 7vw;">
			<span title="Starts with a&nbsp;slash">/</span>
			<span title="Pattern (what to match)" data-index="1">&amp;(lt|gt|amp);</span>
			<span title="Ends with a&nbsp;slash">/</span>
			<span title="Flags (combination of g, i, m, y, u, s)" data-index="1">gi</span>
		</code></h1>
	</section>

	<!-- <section class="slide" id="methods">
		<h1>RegExp aware methods</h1>

		<h2><code>RegExp.prototype</code></h2>
		<ul>
			<li><code class="language-javascript">test(String)</code></li>
			<li><code class="language-javascript">exec(String)</code></li>
		</ul>

		<h2 style="margin-top: 1em"><code>String.prototype</code></h2>
		<ul>
			<li><code class="language-javascript">match(RegExp)</code></li>
			<li><code class="language-javascript">replace(RegExp, String | Function)</code></li>
			<li><code class="language-javascript">split(RegExp)</code></li>
			<li><code class="language-javascript">search(RegExp)</code></li>
		</ul>
	</section> -->

	<section class="slide" data-src="index.html" data-title="Try stuff out at regexplained.com"></section>

	<section class="regex-test slide" data-pattern="a" title="Literals">
		<h1>What we learned</h1>
		<ul class="delayed-children persistent">
			<li>Regexes match anywhere, unless restricted</li>
			<li>Matches cannot intersect</li>
			<li>Case sensitive by default, use the <code>i</code> flag to change</li>
			<li>Unicode characters by <code>\uXXXX</code></li>
		</ul>
		<p class="hint">\u2665 for ‚ô•</p>
	</section>

	<article class="slide" title="Flags">
		<table>
			<thead>
				<th>Flag</th>
				<th>Name</th>
				<th>Purpose</th>
				<th>ES?</th>
			</thead>
			<tr>
				<td><code>g</code></td>
				<td>Global</td>
				<td>Get all matches</td>
				<td>ES3</td>
			</tr>
			<tr>
				<td><code>i</code></td>
				<td>Case Insensitive</td>
				<td>Ignore case when matching</td>
				<td>ES3</td>
			</tr>
			<tr>
				<td><code>m</code></td>
				<td>Multiline</td>
				<td><code>^</code> and <code>$</code> match the beginning and end of each line, not of the whole string</td>
				<td>ES3</td>
			</tr>
			<tr>
				<td><code>y</code></td>
				<td>Sticky</td>
				<td>Anchors each match of a regular expression to the end of the previous match.</td>
				<td>ES2015</td>
			</tr>
			<tr>
				<td><code>u</code></td>
				<td>Unicode</td>
				<td>Treat pattern as a sequence of unicode code points</td>
				<td>ES2015</td>
			</tr>
			<tr>
				<td><code>s</code></td>
				<td>DotAll</td>
				<td><code>.</code> matches newlines as well.</td>
				<td>ES2018? (Stage 3)</td>
			</tr>
		</table>
	</article>

	<section class="regex-test slide" data-pattern="cat|bat|dog" data-test="cat" title="Grouping">
		<h1>What we learned</h1>
		<ul class="delayed-children persistent">
			<li>| for alternatives</li>
			<li>Group with parenthses (Useful for alternatives or quantifiers)</li>
			<li>Alternatives can be empty</li>
			<li>Order matters!</li>
		</ul>
	</section>

	<section class="slide" data-type="Challenge" data-duration="1" data-video="hamsters.webm" style="--position: right">
		<h1>Test Challenge</h1>
		<p>
			Here will be a list of strings you have to match
		</p>
	</section>

	<section class="slide dont-resize" data-type="Challenge" data-duration="1" data-video="hamsters.webm" style="--position: right">
		<h1>Font & Image MIME types</h1>
		<p>
			<code>image/png</code>
			<code>image/jpeg</code>
			<code>image/gif</code>
			<code>font/ttf</code>
			<code>font/otf</code>
			<code>font/woff</code>
			<code>font/woff2</code>
			<span class="not">not</span> <code>image/ttf</code> <code>font/gif</code> etc
		</p>
	</section>

	<section class="narrow slide language-javascript" data-type="Solution">
		<h1 style="white-space: nowrap;">Font & Image MIME types</h1>
		<pre><code>// Wrong! Matches image/ttf, font/gif etc
/(image|font)\/(png|jpeg|gif|ttf|otf|woff|woff2)/</code></pre>
		<pre class="delayed persistent"><code>// Correct, but could be shorter
/image\/(png|jpeg|gif)|font\/ttf|otf|woff|woff2)/</code></pre>
		<pre class="delayed persistent"><code>/image\/(png|jpeg|gif)|font\/(ttf|otf|woff(2|))/</code></pre>
		<pre class="delayed persistent"><code>// Now that‚Äôs going a bit too far‚Ä¶
/image\/(png|jpeg|gif)|font\/(t|o)tf|woff(|2))/</code></pre>
	</section>

	<!-- <article class="refactoring slide language-js">
		<ul class="js-vs-regex">
			<li>
				<pre><code>while(index < str.length) {
	str.in
}</code></pre>
				<strong>&lt;</strong>
				<code></code>
			</li>
		</ul>
	</article> -->

	<section class="regex-test slide" data-pattern="1.5" data-test="1.5" title="The dot metacharacter">
		<p class="hint">/1.5/ show it matches 21056 etc</p>
		<h1>What we learned</h1>
		<ul class="delayed-children persistent">
			<li>Dot (.) matches anything, except line breaks</li>
			<li>The experimental <code>s</code> flag makes it match line breaks</li>
			<li>Escape metacharacters with a backslash</li>
		</ul>
	</section>

	<section class="slide dont-resize" id="metacharacters">
		<h1>The 12 metacharacters</h1>
		<code>[</code>
		<code>{</code>
		<code>(</code>
		<code>)</code>
		<code>\</code>
		<code>^</code>
		<code>$</code>
		<code>.</code>
		<code>|</code>
		<code>?</code>
		<code>*</code>
		<code>+</code>
	</section>

	<section class="regex-test slide" data-pattern="aaaaargh" title="Quantifiers">
		<h1>What we learned</h1>
		<ul class="delayed-children persistent">
			<li>{n} = n times</li>
			<li>{m,n} = at least m times but no more than n times</li>
			<li>{m,} = at least m times</li>
			<li>Quantifiers are greedy</li>
		</ul>
		<p class="hint">(ab){n}, a{2,5} and caaaaaaaaaat</p>
	</section>

	<section class="regex-test slide" data-pattern="bo{0,}" data-test="boooo" title="Quantifier shortcuts">
		<h1>What we learned</h1>
		<ul class="delayed-children persistent">
			<li>* = {0,} , + = {1,} , ? = {0,1}</li>
			<li>Careful of accidental zero length matches!</li>
		</ul>
	</section>

	<section class="slide" data-type="Challenge" data-duration="1">
		<h1>Email</h1>
		<p>
			<code>lea@verou.me</code>,
			<code>leaverou@mit.edu</code>,
			<code>foo@google.co.jp</code>,
			<code>–õ–∏–∞@–í–µ—Ä—É.—Ä—Ñ</code>,
			<code>ŒªŒØŒ±@Œ≤Œ≠œÅŒøœÖ.ŒµŒª</code>,
			<code>me@lea.moscow</code>
		</p>
	</section>

	<section class="narrow slide" data-type="Solution">
		<h1>Email</h1>
		<pre><code class="language-javascript">// Yes, it‚Äôs ok to be lax!
/.+@.+\..+/</code></pre>
	</section>

	<section class="regex-test slide" data-pattern="<.+>" data-test="<p>foo</p>" title="Greediness">
		<h1>What we learned</h1>
		<ul class="delayed-children persistent">
			<li>Quantifiers are greedy</li>
			<li>Make them lazy by adding a ? after them</li>
		</ul>
		<p class="hint">Delete last > to show what happens</p>
	</section>

	<section class="regex-test slide" data-pattern="[bdfglmprty]uck" title="Character classes">
		<h1>What we learned</h1>
		<ul class="delayed-children persistent">
			<li>Brackets = set, range or a combination of both</li>
			<li>Concatenate multiple ranges for a union</li>
			<li>Most metacharacters don‚Äôt need escaping in <code>[]</code></li>
		</ul>
		<p class="hint">in Unicode order</p>
	</section>

	<section class="slide" data-type="Challenge" data-duration="1">
		<h1>Hex color</h1>
		<p>
			<code>#abc</code>, <code>#f00</code>, <code>#BADA55</code>, <code>#C0FFEE</code>
		</p>
	</section>

	<section class="narrow slide" data-type="Solution">
		<h1>Hex color</h1>
		<pre><code class="language-javascript">/#[a-f0-9]{3,6}/i // Wrong!</code></pre>
		<pre class="delayed persistent"><code class="language-javascript">/#([a-f0-9]{3}){1,2}/i</code></pre>
	</section>

	<section class="regex-test slide" data-pattern="[a-zA-Z0-9_]" title="Predefined character classes">
		<h1>What we learned</h1>
		<ul class="delayed-children persistent">
			<li>
				<code>\w</code> = <code>[a-zA-Z0-9_]</code>,
				<code>\d</code> = <code>[0-9]</code>,
				<code>\s</code> ‚âà <code>[\t\r\n ]</code></li>
			<li>Combine to form more complex character classes</li>
		</ul>
	</section>

	<section class="slide" data-type="Example">
		<h1>Counting words (roughly)</h1>
		<pre><code class="language-javascript">function wordCount(text){
	return text.match(/\w+/g).length;
}</code></pre>
		<pre><code class="language-javascript">function wordCount(text){
	return text.split(/\s+/).length;
}</code></pre>
	</section>

	<section class="slide" data-type="Challenge" data-duration="2">
		<h1>Number</h1>
		<p>Without exponent or digit separators</p>
		<p>
			<code>-1</code>, <code>.05</code>, <code>+1000</code>, <code>3.1415926535</code>, <code>42.</code>
		</p>
	</section>

	<section class="narrow slide" data-type="Solution">
		<h1>Number</h1>
		<pre><code class="language-javascript">/^[-+]?[\d.]+$/ // Too lax</code></pre>
		<pre class="delayed persistent"><code class="language-javascript">/^[-+]?\d*\.?\d+$/ // False negatives: 5.</code></pre>
		<pre class="delayed persistent"><code class="language-javascript">/^[-+]?\d*\.?\d*$/ // False positives: ., +., + etc</code></pre>
		<pre class="delayed persistent"><code class="language-javascript">// Accurate, but is it worth it?
/^[-+]?(\d*\.?\d+|\d+\.)$/</code></pre>
	</section>

	<section class="regex-test slide" data-pattern="[\u0001-/:-@[-^`{-\uffff]" data-test="afz" title="Negated character classes">
		<!-- [\u0001-/:-@[-^`{-\uffff] -->
		<h1>What we learned</h1>
		<ul class="delayed-children persistent">
			<li><code>^</code> negates a character class</li>
			<li>
				<code>\W</code> = <code>[^\w]</code>,
				<code>\D</code> = <code>[^\d]</code>,
				<code>\S</code> = <code>[^\s]</code>
			</li>
			<li>Even the dot is a character class: <code>.</code> = <code>[^\r\n\u2028\u2029]</code></li>
			<li>DotAll alternatives: <code>[^]</code>, <code>[\S\s]</code>, <code>[\W\w]</code>, <code>[\D\d]</code></li>
		</ul>
	</section>

	<section class="slide" data-type="Example">
		<h1>Strip HTML</h1>
		<pre><code class="language-javascript">function stripHTML(str){
    return str.replace(/&lt;.+?>/g, '');
}</code></pre>
		<pre class="delayed"><code class="language-javascript">function stripHTML(str){
    return str.replace(/&lt;[^>]+>/g, '');
}</code></pre>
		<p>Warning: Will fail in edge cases</p>
	</section>

	<section class="regex-test slide" data-pattern="\p{Alphabetic}" data-test="–í–µ—Ä—É –õ–∏–∞" data-flags="gu" title="Unicode Property Escapes">
		<h1>What we learned</h1>
		<ul class="delayed-children persistent">
			<li>Syntax: <code>\p{<em>UNICODE_PROPERTY</em>=<em>VALUE</em>}</code>. Needs <code>u</code> flag.</li>
			<li>When Unicode Property is <code>General_Category</code> it can be omitted.</li>
			<li>Experimental, <a href="https://github.com/tc39/proposal-regexp-unicode-property-escapes">proposal in Stage 3</a>, implemented in Chrome & Safari</li>
		</ul>
		<p class="hint">Script=Cyrillic</p>
	</section>

	<section class="regex-test slide" data-pattern="(Java|ECMA)Script" data-test="JavaScript" title="Capturing">
		<h1>What we learned</h1>
		<ul class="delayed-children persistent">
			<li>Parentheses form capturing groups</li>
			<li>Add <code>?:</code> in the begninning to avoid this</li>
		</ul>
	</section>

	<section class="regex-test slide" data-pattern="^a" data-test="cat" title="Anchors">
		<h1>What we learned</h1>
		<ul class="delayed-children persistent">
			<li><code>^</code> = beginning of string</li>
			<li><code>$</code> = end of string</li>
			<li>beginning/end of lines, with the <code>m</code> flag</li>
		</ul>
	</section>

	<section class="slide" data-type="Challenge" data-duration="2">
		<h1>ISO 8601 Dates</h1>
		<p>Just dates, no time or timezone information</p>
		<p>
			<code>2012-12-12</code>, <code>1986-06-13</code>
		</p>
	</section>

	<section class="slide" data-type="Solution">
		<h1>ISO 8601 Dates</h1>
		<pre><code class="language-javascript">/^\d{4}-\d{2}-\d{2}$/.test(str)</code></pre>
		<pre class="delayed persistent"><code class="language-javascript">/^\d{4}-(0\d|1[0-2])-([0-2]\d|3[01])$/.test(s)</code></pre>
		<p class="delayed">Can it be improved further?</p>
	</section>

	<section class="slide" data-type="Example">
		<h1>Trimming a string</h1>
		<pre><code class="language-javascript">if (!String.prototype.trim) {
    String.prototype.trim = function(){
        return this.replace(/^\s+|\s+$/g, '');
    }
}</code></pre>
	</section>

	<section class="regex-test slide" data-pattern="\b" title="Assertions">
		<h1>What we learned</h1>
		<ul class="delayed-children persistent">
			<li>Assertions are zero width</li>
			<li><code>\b</code> = word boundary = between <code>\w</code> and <code>\W|^|$</code></li>
			<li><code>\B</code> = non-word boundary = between <code>\w</code> and <code>\w</code> or <code>\W</code> and <code>\W</code></li>
		</ul>
	</section>

	<article class=" slide language-js">
		<h1>Before <code>element.classList</code>‚Ä¶</h1>
		<pre><code>function removeClass(element, name) {
	var regex = RegExp("\\b" + name + "\\b", "g");
	return element.className = element.className.replace(regex, ""));
}</code></pre>
		<pre class="delayed"><code>element.className = "item-toolbar";
removeClass(element, "toolbar"); // "item-"</code></pre>
	</article>

	<section class="regex-test slide" data-pattern="a(b)" data-test="ab" title="Lookahead">
		<h1>What we learned</h1>
		<ul class="delayed-children persistent">
			<li><code>(?=a)</code> = followed by a, which can be any regex</li>
			<li><code>(?!a)</code> = NOT followed by a</li>
		</ul>
	</section>

	<section id="lookahead-hacks" class="language-javascript">
		<header class="slide">
			<h1>Lookahead hacks</h1>
			<h2>for fun and profit</h2>
		</header>

		<section class="slide">
			<h1>Intersection <span class="math"><em>A</em> ‚à© <em>B</em></span></h1>
			<p>‚ÄúPassword must be 6 letters or longer, and must contain at least one number, one letter, and one symbol.‚Äù</p>
			<pre><code>password.length > 6
		&& /\d/.test(password) // has digit?
		&& /[a-z]/i.test(password) // has letter?
		&& /\W/.test(password) // has symbol?</code></pre>
			<pre class="delayed"><code>// Or, with lookaheads‚Ä¶
/^(?=.*\d)(?=.*[a-z])(?=.*[\W_]).{6,}$/i</code></pre>
		</section>

		<section class="slide">
			<h1>Subtraction <span class="math"><em>A</em> ‚Äì <em>B</em></h1>
			<p>‚ÄúAny integer that‚Äôs NOT divisible by 50‚Äù</p>
			<pre><code> /^(?!\d+[50]0)\d+$/</code></pre>
		</section>

		<section class="slide">
			<h1>Negation <span class="math"><em>AÃÖ</em></h1>
			<p>‚ÄúAnything that doesn‚Äôt contain "foo"‚Äù</p>
			<pre><code>/^(?!.*foo).+$/</code></pre>
		</section>
	</section>

	<section class="regex-test slide" data-pattern="(?&lt;=a)b" data-test="ab" title="Lookbehind">
		<h1>What we learned</h1>
		<ul class="delayed-children persistent">
			<li><code>(?&lt;=a)</code> = preceded by a, which can be any regex</li>
			<li><code>(?&lt;!a)</code> = NOT preceded by a</li>
			<li>Experimental (<a href="https://github.com/tc39/proposal-regexp-lookbehind">Proposal in Stage 3</a>), only supported in V8 behind a flag</li>
		</ul>
	</section>

	<section class="regex-test slide" data-pattern="('|&quot;).+?('|&quot;)" title="Backreferences">
		<h1>What we learned</h1>
		<ul class="delayed-children persistent">
			<li><code>\N</code> = Nth backreference</li>
		</ul>
		<p class="hint">('|")(\\\1|.)+?\1 for escaped quotes</p>
	</section>

	<section class="regex-test slide" title="Account for escaped quotes AND backslashes"
		data-pattern="(&quot;|')(\\?.)*?\1"
		data-test='"He &apos;said&apos; \"hi\"!" "another string"'>
		<p class="credit">Regex credit: Steven Levithan</p>
	</section>

	<section class="slide" data-type="Challenge" data-duration="2">
		<h1>Correctly Nested Parens</h1>
		<p>
			<code>()</code>, <code>(())()</code>, <code>(()()())</code>, <code>((((((()))))))</code>
			<strong class="not">not</strong> <code>()(</code>, <code>)</code>, <code>((((((()))</code>
		</p>
	</section>

	<article class="top-heavy image slide" id="troll">
		<h1 class="delayed">Not a regular language</h1>
	</article>

	<article class="slide" id="cfg">
		<h1>Context Free Grammar</h1>
		<ul class="plain math">
			<li><em>S</em> ‚Üí (<em>S</em>)</li>
			<li><em>S</em> ‚Üí <em>S</em><em>S</em></li>
			<li><em>S</em> ‚Üí <em>Œµ</em></li>
		</ul>
	</article>
</section>

<section>
	<header class="slide" id="best-practices">
		<h1>Best Practices</h1>
	</header>

	<section class="image slide" id="precise-impractical" data-source="regular-expressions.info/email.html">
		<code>(?:[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&amp;'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])</code>
		<h1 class="caption">Precision vs practicality</h1>
	</section>

	<section class="top-heavy image slide" style="background-image: url(img/pregnancy-test.jpg);" data-source="http://www.flickr.com/photos/mandaloo/4369363690/">
		<h1>False positives vs false negatives</h1>
	</section>

	<section class="image slide language-javascript" id="kiss">
		<div class="caption">
			<h1>Keep it simple</h1>
			<h2>Even if it means not using regexes at all</h2>
		</div>
		<ul class="plain delayed-children js-vs-regex">
			<li>
				<code>str === "foo"</code>
				<strong>></strong>
				<code>/^foo$/.test(str)</code>
			</li>
			<li>
				<code>str.indexOf("foo") > -1</code>
				<strong>></strong>
				<code>/foo/.test(str)</code>
			</li>
			<li>
				<code>str.indexOf("foo") === 0</code>
				<strong>></strong>
				<code>/^foo/.test(str)</code>
			</li>

		</ul>
	</section>

	<section class="slide">
		<h1>For performance</h1>
		<ul>
			<li>Avoid greedy quantifiers</li>
			<li>Don‚Äôt forget anchors (<code>^</code> and <code>$</code>)</li>
			<li>Be as specific as possible</li>
			<li>Prefer non-capturing groups <code>(?:)</code></li>
			<li>Minimize backtracking</li>
		</ul>
	</section>

	<section class="regex-test slide" data-pattern="(x+x+)+y" data-test="xxxx" title="Catastrophic backtracking">
		<h1>What we learned</h1>
		<ul class="delayed-children persistent">
			<li>Only applies when there is no match</li>
			<li>Avoid nested quantifiers</li>
		</ul>
	</section>
</section>

<!-- <section>
	<header class="slide" id="js-regexp-api">
		<h1>JS RegExp API</h1>
	</header>

	<section class="slide">
		<h1>RegExp instances</h1>
		<pre><code class="language-javascript">var literal = /^\$\d+/g,
    // You don‚Äôt need the new operator
    dynamic = RegExp('^\\$\\d+', 'g');</code></pre>
		<ul class="delayed">
			<li>Literals are simpler, faster, more concise</li>
			<li>Only use the constructor when you really have to!</li>
		</ul>
	</section>

	<section class="slide">
		<h1>RegExp properties for flags</h1>
		<ul>
			<li>
				<code>RegExp#global</code>
			</li>
			<li>
				<code>RegExp#multiline</code>
			</li>
			<li>
				<code>RegExp#ignoreCase</code>
			</li>
		</ul>

		<pre><code class="language-javascript">>>> /a/g.global; // true
>>> /a/.global; // false
>>> /a/m.multiline; // true
>>> /a/gi.multiline; // false
>>> /a/i.ignoreCase; // true</code></pre>
	</section>

	<section class="slide">
		<h1>Other RegExp properties</h1>
		<ul>
			<li>
				<code>RegExp#source</code>
				<pre><code class="language-javascript">console.log(/a/i.source) // "a"</code></pre>
			</li>
			<li><code>RegExp#lastIndex</code></li>
		</ul>
	</section>

	<section class="slide" data-import="methods"></section>

	<section class="slide">
		<h1><code>RegExp#test</code></h1>
		<pre><code class="language-javascript">/a/.test('ab'); // returns true</code></pre>
		<ul>
			<li>Faster than most of the others</li>
		</ul>
	</section>

	<section class="slide">
		<h1><code>RegExp#exec</code></h1>
		<pre><code class="language-javascript">/a(b)/.exec('abba'); // ["ab", "b"]</code></pre>
		<pre class="delayed"><code class="language-javascript">var reg = /a(b)/g, bar = 'abba', matches = [], m;
while (m = reg.exec(bar))
  matches.push({
    index: m.index, // reg.lastIndex-m[0].length+1
    length: m[0].length,
    groups: m
  });</code></pre>
	</section>


	<section class="slide">
		<h1><code>RegExp#exec</code></h1>
		<pre><code class="language-javascript">>>> /a(bc)/.exec('abcba')[1];
"bc"</code></pre>
		<pre><code class="language-javascript">>>> /a(bc)/.exec('abba')[1];</code>
<code class="error">TypeError: Cannot read property '1' of null</code></pre>
		<div class="delayed">
			<p>Handy trick by James Padolsey:</p>
			<pre><code class="language-javascript">>>> (/regex/.exec('string') || [,''])[1];</code></pre>
		</div>
	</section>

	<section class="slide">
		<h1><code>String#match</code></h1>
		<pre><code class="language-javascript">>>> 'abcdef'.match(/(\w){3}/);
["abc", "c"] // Same as /(\w){3}/.exec('abcdef')</code></pre>
		<pre><code class="language-javascript">>>> 'abcdef'.match(/(\w){3}/g);
["abc", "def"]</code></pre>
		<pre><code class="language-javascript">>>> 'ab'.match(/(\w){3}/g);
null</code></pre>
	</section>

	<section class="slide">
		<h1><code>String#replace</code></h1>
		<pre><code class="language-javascript">>>> 'blabla'.replace('b', ''); // "labla"</code></pre>
		<pre class="delayed persistent"><code class="language-javascript">>>> 'blabla'.replace(/b/g, ''); // "lala"</code></pre>
		<pre class="delayed persistent"><code class="language-javascript">>>> 'blabla'.replace(/(\w)/g, '$1$1'); // "bbllaabbllaa"</code></pre>
		<pre class="delayed persistent"><code class="language-javascript">>>> 'border-radius'.replace(/-(\w)/g, function($0,$1){
	return $1.toUpperCase();
}); // "borderRadius"</code></pre>
	</section>

	<section class="slide">
		<h1><code>String#split</code></h1>
		<pre><code class="language-javascript">'Lea wants a $20K Mini.'.split(/\s+/).length; // 5</code></pre>

		<h1><code>String#search</code></h1>
		<pre><code class="language-javascript">'Lea wants a $20K Mini.'.search(/\s+/); // 3</code></pre>
		<ul class="delayed">
			<li>Like a regex-aware <code>String#indexOf</code>!</li>
		</ul>
	</section>
</section> -->

<!-- <section>
	<header class="slide" id="tools">
		<h1>Tools</h1>
	</header>

	<section class="slide">
		<hgroup>
			<h1>XRegExp</h1>
			<h2>By Steven Levithan</h2>
		</hgroup>
		<p>RegExp wrapper that adds awesomeness like:</p>
		<ul>
			<li>Comments in regexes</li>
			<li>Flag to turn off automatic capturing</li>
			<li>Flag to ignore whitespace</li>
			<li>Named capturing groups</li>
			<li>Unicode-aware predefined classes</li>
			<li>Smooths out browser bugs</li>
			<li>Plugins for even more awesomeness</li>
		</ul>
	</section>

	<section class="slide" data-src="http://xregexp.com/"></section>

	<section class="slide">
		<hgroup>
			<h1>Regexpal</h1>
			<h2>By Steven Levithan</h2>
		</hgroup>
		<p>Simple but powerful regexp tester</p>
		<ul>
			<li>Highlights regex syntax and matches as you type</li>
			<li>Includes a quick reference for regex syntax</li>
			<li>Knows about syntax that doesn‚Äôt work correctly in some browsers, and marks it as an error</li>
			<li>Pure JavaScript, so you can save it and use offline</li>
		</ul>
	</section>

	<section class="slide" data-src="http://regexpal.com/"></section>

	<section class="slide" data-src="http://www.regexbuddy.com/"></section>

	<section class="slide">
		<h1>Resources</h1>
		<h2>Online:</h2>
		<ul style="word-break: break-all;">
			<li><a href="http://www.regular-expressions.info">regular-expressions.info</a></li>
			<li><a href="http://blog.stevenlevithan.com/">blog.stevenlevithan.com</a>
			<li><a href="https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions">developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions</a></li>
		</ul>
		<h2>Books:</h2>
		<ul>
			<li>Regular Expressions Cookbook - Jan Goyvaerts &amp; Steven Levithan</li>
			<li>Mastering Regular Expressions - Jeffrey E.F. Friedl</li>
		</ul>
	</section>
</section> -->

<article class="slide" id="thankyou" title="Thank you!" data-credits="gifimage.net, giphy.com"></article>

<footer class="slide dont-resize">
	<img src="../talks/shared/img/mark.svg" class="logo" />
	<h1>Thank you!</h1>
	<img src="../talks/css-variables/img/stickers.jpg" class="stickers delayed" alt="">
	<p class="stickercaption delayed">Want one? Just ask!---></p>
	<ul class="plain">
		<li style="--icon: 'üåç'"><a href="http://mavo.io">lea.verou.me</a></li>
		<li style="--icon: '‚úâ'"><a href="mailto:lea@verou.me">lea@verou.me</a></li>
		<li style="--icon: 'üê¶'"><a href="http://twitter.com/leaverou">@leaverou</a></li>
	</ul>

	<p>Slides: <a href="https://leaverou.github.io/regexplained/slides.html">leaverou.github.io/regexplained/slides.html</a></p>
	<p style="font-size: 50%;">This slide deck was entirely built with open web technologies! Slideshow framework: <a href="http://github.com/LeaVerou/CSSS">github.com/LeaVerou/CSSS</a></p>
</footer>

<script src="bliss.shy.js"></script>
<script>
// Bliss.$('body.no-challenges .slide[data-type="Solution"]').forEach(function(slide) {
// 	// Turn challenge answers into examples
// 	var challengeSlide = slide.previousElementSibling;
// 	var h1 = $('h1', slide);
// 	var sibling = h1? h1.nextSibling : null;
//
// 	Bliss.$('p', challengeSlide).forEach(function(p) {
// 		slide.insertBefore(p, sibling);
// 	});
//
// 	challengeSlide.parentNode.removeChild(challengeSlide);
// 	slide.setAttribute('data-type', 'Example');
// });
</script>
<script src="../csss/slideshow.js"></script>
<script>
var $ = Bliss, $$ = Bliss.$;
</script>
<script src="regex-test.js"></script>
<script src="regexplained.js"></script>
<script src="../prism.js/prism.js"></script>
<script>
	$$(".slide.regex-test[title]:not([id])").forEach(slide => slide.id = slide.title.replace(/[^\w\s-]/g, "").replace(/\s+/g, "-").toLowerCase())
</script>

</body>
</html>
